apply plugin: 'com.android.application'

apply from: 'findbugs.gradle'
check.dependsOn 'findbugs'

apply plugin: 'kotlin-android'
apply plugin: 'kotlin-android-extensions'

androidExtensions {
    experimental = true
}

android {
    compileSdkVersion rootProject.ext.androidCompileSdkVersion

    defaultConfig {
        applicationId "info.nukoneko.cuc.android.kidspos"
        minSdkVersion rootProject.ext.androidMinSdkVersion
        targetSdkVersion rootProject.ext.androidTargetSdkVersion
        versionCode 6
        versionName "1.0.5"
    }

    dataBinding {
        enabled true
    }

    buildTypes {
        debug {
            minifyEnabled false
            applicationIdSuffix = '.debug'
        }
        demo {
            minifyEnabled false
            debuggable true
            applicationIdSuffix = '.demo'
        }
        release {
            minifyEnabled true
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }

    flavorDimensions "default"
    productFlavors {
        prod {
            dimension "default"
        }

        latestDev {
            dimension "default"
            minSdkVersion rootProject.ext.androidCompileSdkVersion
        }
    }

    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_7
        targetCompatibility JavaVersion.VERSION_1_7
    }

    configurations.all {
        resolutionStrategy.force 'com.google.code.findbugs:jsr305:3.0.2'
    }

    lintOptions {
        abortOnError false
    }
}

dependencies {
    Map<String, String> dependencies = rootProject.ext.deps
    
    implementation dependencies.kotlin.core
    implementation dependencies.kotlin.coroutines.core
    implementation dependencies.kotlin.coroutines.android

    implementation dependencies.android.support.appCompat
    implementation dependencies.android.support.preference
    implementation dependencies.android.support.recyclerview
    implementation dependencies.android.support.design
    implementation dependencies.android.support.cardView
    implementation dependencies.retrofit.client
    implementation dependencies.retrofit.converterGson
    implementation dependencies.retrofit.adapterRxJava
    implementation dependencies.rx.java2
    implementation dependencies.rx.android
    implementation dependencies.eventBus
    implementation dependencies.loger

    testImplementation dependencies.test.jUnit
    testImplementation dependencies.test.mockito
    testImplementation dependencies.test.robolectric
}
